{% extends "base.html" %}

{% block content %}
<!-- Existing content for the student -->

<!-- Add the following section to display the classes -->
<div class="container">
  <h2>Join Requests</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Class Name</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for join_request in student.join_requests %}
      <tr>
        <td>{{ join_request.class_.name }}</td>
        <td>{{ join_request.status }}</td>
        <td>
          {% if join_request.status == 'pending' %}
          <a href="{{ url_for('auth.accept_join_request', join_request_id=join_request.id) }}" class="btn btn-success">Accept</a>
          <a href="{{ url_for('auth.reject_join_request', join_request_id=join_request.id) }}" class="btn btn-danger">Reject</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div class="container">
  <form method="GET" action="{{ url_for('auth.student', student_id=student.id) }}">
    <div class="form-group">
      <label for="year_group">Year Group:</label>
      <input type="number" class="form-control" id="year_group" name="year_group" min="1" step="1" value="{{ search_year_group|default('') }}">
    </div>
    <div class="form-group">
      <label for="subject_id">Subject:</label>
      <select class="form-control" id="subject_id" name="subject_id">
        <option value="">Select a subject</option>
        {% for subject in subjects %}
          <option value="{{ subject.id }}" {% if subject.id == search_subject_id|int %}selected{% endif %}>{{ subject.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group">
      <label for="teacher_id">Teacher:</label>
      <select class="form-control" id="teacher_id" name="teacher_id">
        <option value="">Select a teacher</option>
        {% for teacher in teachers %}
          <option value="{{ teacher.id }}" {% if teacher.id == search_teacher_id|int %}selected{% endif %}>{{ teacher.first_name }} {{ teacher.last_name }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>
</div>
{% endblock %}
